# CMD Module Structure

本模块包含了 `llm-caller` CLI 工具的所有命令定义和实现。

## 文件结构

### `root.go`
- 根命令定义和全局配置
- 应用初始化逻辑
- 子命令注册
- Execute() 函数

### `call.go`
- `call` 命令：执行 LLM API 调用
- 变量解析逻辑（支持 text/file/base64 类型）
- API Key 获取优先级处理
- 输出管理（stdout 或文件）

### `config.go`
- `config` 命令及所有子命令：
  - `set` - 设置配置值
  - `get` - 获取配置值
  - `list` - 列出所有配置
  - `unset` - 删除配置值

### `template.go`
- `template` 命令及所有子命令：
  - `list` - 列出模板
  - `download` - 从 GitHub 下载模板
  - `show` - 显示模板内容
  - `validate` - 验证模板格式

### `doctor.go`
- `doctor` 命令：环境诊断
- 配置文件检查
- 模板目录检查
- API Key 可用性检查
- 环境健康评估

## 重构优势

1. **模块化**：每个命令独立为一个文件，职责清晰
2. **可维护性**：单个文件更小，更容易理解和修改
3. **可扩展性**：添加新命令只需创建新文件
4. **代码复用**：通用函数可以在多个文件间共享
5. **测试友好**：每个模块可以独立测试

## 共享资源

- `cfg` 变量：全局配置实例，所有命令文件都可访问
- `loadApiKeys()` 函数：在 `call.go` 中定义，`doctor.go` 中复用

## 设计原则

- 单一职责：每个文件只负责一个主要命令
- 清晰的命名：文件名直接对应命令名
- 统一的错误处理：使用 `fmt.Errorf` 包装错误
- 一致的输出格式：使用表情符号和颜色提示 